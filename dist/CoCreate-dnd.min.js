<<<<<<< HEAD
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoCreate=t():(e.CoCreate=e.CoCreate||{},e.CoCreate.dnd=t())}(this,(function(){return(()=>{var e={980:function(e,t,n){var r,i;"undefined"!=typeof self&&self,r=[n(585),n(129)],void 0===(i=function(e,t){return function(e,t,n){if(e){let e=new t("ws");n.setSocket(e),n.createSocket(window.config.host?window.config.host:window.location.hostname,window.config.organization_Id)}return n}(!0,e,t)}.apply(t,r))||(e.exports=i)},129:function(e,t,n){var r,i;"undefined"!=typeof self&&self,r=[n(446)],void 0===(i=function(e){return function(e,t){return{socket:null,setSocket:function(e){this.socket=e},send:function(e){let n=t.getCommonParams();if(!e||!e.emit)return;n={...n,...e};const r=t.generateSocketClient(e.namespace,e.room);this.socket.send("sendMessage",n,r)},receive:function(e,t){this.socket.listen(e,t)},createSocket:function(e,t){this.socket&&(t?(this.socket.create({namespace:t,room:null,host:e}),this.socket.setGlobalScope(t)):this.socket.create({namespace:null,room:null,host:e}))},listen:function(e,t){this.socket.listen(e,t)},listenAsync:function(e){return this.socket.listenAsync(e)}}}(window,e)}.apply(t,r))||(e.exports=i)},366:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i}),window.profiler={},window.counter=0,window.counter2=0,window.targets={},window.attributeName={},Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});const r={initTasks:new Map,attrTasks:new Map,rules:new Map,rulesArray:[],__init:function(){const e=this;new MutationObserver(((t,n)=>e.__callback(t,n))).observe(document.body,{attributes:!0,childList:!0,subtree:!0,characterData:!1,attributeOldValue:!0,characterData:!0})},init:function({observe:e,include:t,exclude:n,attributes:r,name:i,callback:o}){e.some((e=>"childList"==e))&&this.initTasks.set(o,{observe:e,include:t,exclude:n,attributes:r,name:i}),e.some((e=>"attributes"==e))&&this.attrTasks.set(o,{observe:e,include:t,exclude:n,attributes:r,name:i})},remove:function(e){this.initTasks.delete(e),this.attrTasks.delete(e)},addRule:function({include:e,exclude:t,name:n}){this.rules.set(n,{include:e,exclude:t}),this.rulesArray=Array.from(this.rules)},removeRule:function({name:e}){this.rules.delete(e),this.rulesArray=Array.from(this.rules)},__callback:function(e,t){window.counter++;for(let t of e)"childList"==t.type&&t.addedNodes.length>0&&this.__initCallback(t),"attributes"==t.type&&this.__attrCallback(t)},__initCallback:function(e){Array.from(e.addedNodes);this.initTasks.forEach((({observe:t,include:n,exclude:r,attributes:i,name:o},a)=>{e.addedNodes.forEach((t=>{t.tagName&&(!n||t.matches(n)||t.querySelector(n))&&(r&&(t.matches(r)||t.querySelector(r))||a.apply(null,[{type:e.type,target:t}]))}))}))},__attrCallback:function(e){for(let[t,{include:n,exclude:r}]of this.rulesArray){if(n&&!e.target.matches(n))return;if(r&&e.target.matches(r))return}this.attrTasks.forEach((({observe:t,include:n,exclude:r,attributes:i,name:o},a)=>{if((!i||!e.attributeName||i.includes(e.attributeName))&&(!n||e.target.matches(n))&&(!r||!e.target.matches(r))&&e.attributeName){e.target.getAttribute(e.attributeName)!=e.oldValue&&a.apply(null,[e])}}))},setInitialized:function(e,t){e["co_initialized_"+(t=t||"")]=!0},getInitialized:function(e,t){return!!e["co_initialized_"+(t=t||"")]}};r.__init();const i=r},446:function(e,t){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(e){function t(){let t={};return e&&e.config&&(t=e.config),{apiKey:t.apiKey,securityKey:t.securityKey,organization_id:t.organization_Id}}function n(t){let n={};return e&&e.config&&(n=e.config),{apiKey:t.apiKey||n.apiKey,securityKey:t.securityKey||n.securityKey,organization_id:t.organization_id||n.organization_Id}}function r(t,n){let r={};e&&e.config&&(r=e.config);let i=t||r.organization_Id,o=n||"";return o?`${i}/${o}`:i}function i(e=36){let t=(new Date).getTime(),n=0,r="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(e<=r.length)r=r.substr(0,e);else{let t=e-r.length,n="-xxxyyxxx",i=Math.floor(t/n.length);for(let e=0;e<i;e++)r+=n;i=t-i*n.length,r+=n.substr(0,i)}return r.replace(/[xy]/g,(function(e){var r=16*Math.random();return t>0?(r=(t+r)%16|0,t=Math.floor(t/16)):(r=(n+r)%16|0,n=Math.floor(n/16)),("x"==e?r:7&r|8).toString(16)}))}return{getCommonParams:t,getCommonParamsExtend:n,generateSocketClient:r,GenerateUUID:i}}(window)}.apply(t,[]))||(e.exports=n)},585:function(e,t,n){var r,i;"undefined"!=typeof self&&self,r=[n(446)],void 0===(i=function(e){return function(e,t,n,r){class i{constructor(e="crud"){this.prefix=e||"crud",this.sockets=new Map,this.listeners=new Map,this.messageQueue=new Map,this.saveFileName="",this.globalScope=""}setGlobalScope(e){this.globalScope=`${this.prefix}/${e}`}getGlobalScope(){return this.globalScope}create(e){const{namespace:i,room:o}=e,a=this.getKey(i,o);let s,l=this;if(i&&this.setGlobalScope(i),this.sockets.get(a))return void(s=this.sockets.get(a));let d=t.location.protocol;"about:"===t.location.protocol&&(d=t.parent.location.protocol,e.host||(e.host=t.parent.location.host));let c="http:"===d?"ws":"wss";const u=e.port?e.port:8088;let h=`${c}://${t.location.host}:${u}/${a}`;e.host&&(h=e.host.includes("://")?`${e.host}/${a}`:e.host.includes(":")?`${c}://${e.host}/${a}`:`${c}://${e.host}:${u}/${a}`);try{s=new n(h)}catch(e){return}s.onopen=function(e){(l.messageQueue.get(a)||[]).forEach((e=>s.send(JSON.stringify(e)))),l.sockets.set(a,s),l.messageQueue.set(a,[])},s.onclose=function(t){switch(t.code){case 1e3:break;default:l.destroy(s,a),l.reconnect(s,e)}},s.onerror=function(t){l.destroy(s,a),l.reconnect(s,e)},s.onmessage=function(e){try{if(t.Blob&&e.data instanceof r)return void l.saveFile(e.data);let i=JSON.parse(e.data);if(i.data.event){if(t.CustomEvent){var n=new t.CustomEvent(i.data.event,{detail:i.data});return void t.document.dispatchEvent(n)}return void process.emit(i.data.event,i.data)}i.action;const o=l.listeners.get(i.action);if(!o)return;o.forEach((e=>{e(i.data,a)}))}catch(e){}}}send(t,n,r){const i={action:t,data:{...n,uid:e.GenerateUUID()}},o=this.getKeyByRoom(r),a=this.getByRoom(r);a?a.send(JSON.stringify(i)):this.messageQueue.get(o)?this.messageQueue.get(o).push(i):this.messageQueue.set(o,[i])}sendFile(e,t){const n=this.getByRoom(t);n&&n.send(e)}listen(e,t){this.listeners.get(e)?this.listeners.get(e).push(t):this.listeners.set(e,[t])}reconnect(e,t){let n=this;setTimeout((function(){n.create(t)}),1e3)}destroy(e,t){e&&(e.onerror=e.onopen=e.onclose=null,e.close(),e=null),this.sockets.get(t)&&this.sockets.delete(t)}destroyByKey(e){let t=this.sockets.get(e);t&&this.destroy(t,e)}getKey(e,t){let n=`${this.prefix}`;return e&&""!=e&&(n+=t&&""!=t?`/${e}/${t}`:`/${e}`),n}getByRoom(e){let t=this.getKeyByRoom(e);return this.sockets.get(t)}getKeyByRoom(e){let t=this.globalScope;return e&&(t=`${this.prefix}/${e}`),t}saveFile(e){if(t.document){const r=this.saveFileName||"downloadFile";var n=t.document.createElement("a");t.document.body.appendChild(n),n.style="display: none";let i=window.URL.createObjectURL(e);n.href=i,n.download=r,n.click(),t.URL.revokeObjectURL(i),this.saveFileName=""}}listenAsync(e){return new Promise(((n,r)=>{t.document?t.document.addEventListener(e,(function(e){n(e.detail)}),{once:!0}):process.once(e,(e=>{n(e)}))}))}}return i}(e,window,WebSocket,Blob)}.apply(t,r))||(e.exports=i)},727:(e,t,n)=>{"use strict";function r(e=36){let t=(new Date).getTime(),n=window.performance&&window.performance.now&&1e3*window.performance.now()||0,r="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(e<=r.length)r=r.substr(0,e);else{let t=e-r.length,n="-xxxyyxxx",i=Math.floor(t/n.length);for(let e=0;e<i;e++)r+=n;i=t-i*n.length,r+=n.substr(0,i)}return r.replace(/[xy]/g,(function(e){var r=16*Math.random();if(t>0){r=(t+r)%16|0;t=Math.floor(t/16)}else{r=(n+r)%16|0;n=Math.floor(n/16)}return("x"==e?r:7&r|8).toString(16)}))}function i(e,t,n){if(t){if(e.classList.contains(t))return e;let n=e.parentNode;for(;null!=n&&n.classList;){if(n.classList.contains(t))return n;n=n.parentNode}}else if(n){if(n.every((t=>e.attributes.hasOwnProperty(t))))return e;let t=e.parentNode;for(;null!=t&&t.attributes;){if(n.every((e=>t.attributes.hasOwnProperty(e))))return t;t=t.parentNode}}return!1}function o(e){try{let t=JSON.parse(e);return"object"==typeof t&&null!=t}catch(e){return!1}}function a(e){return e.getAttributeNames().reduce(((t,n)=>(t[n]=e.getAttribute(n),t)),{})}function s(e){return!!e&&!/{{\s*([\w\W]+)\s*}}/g.test(e)}function l(e){let t=[{document,window}];for(let e of document.querySelectorAll("iframe")){let n=e.contentDocument||e.contentWindow.document,r=e.contentWindow;t.push({document:n,window:r,frameElement:e})}let n=new Set;for(let r of t){let t=e(r);t&&"function"==typeof t[Symbol.iterator]?t.forEach((e=>n.add(e))):t&&n.add(t)}return Array.from(n)}function d(e){let t=[];do{if(!e||!e.tagName)return!1;let n=e.tagName.toLowerCase();if(e.id&&"BODY"!==e.tagName&&(n+="#"+e.id),e.classList.length&&"BODY"!==e.tagName&&e.classList.forEach((e=>{-1===e.indexOf(":")&&(n+="."+e)})),"BODY"!==e.tagName&&e.parentNode){let t=Array.prototype.indexOf.call(e.parentNode.children,e);n+=`:nth-child(${t+1})`}t.unshift(n),e=e.parentNode}while("HTML"!==e.tagName);return t.join(" > ")}function c(){let e=window;for(;e!==window.parent;)e=window.parent;return e}function u(e,t){let n;return l((e=>{e.document.contains(t)&&(n=e.frameElement)})),n}function h(e){let t=c;return e.forEach((e=>{t&&(t=t.querySelector(e))})),t}function*f(e,t){for(let n of e)n.selector&&t.matches(n.selector)&&(yield n)}function p(e,t,n,r){for(let i of f(r||window.elementConfig,e)){if(!0===i[t])return n(e,i);if(!1===i[t])return!1;if(void 0===i[t])continue;if(w(i[t]))return n(e,i,!0)}return!1}function m(e=10){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=n.length,i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t+=(new Date).toTimeString().replace(/[\W_]+/g,"").substr(0,6)}function g(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.head.children[0]?t.head.children[0]:t.body.children[0]}function b(e,t){return e.split(t).map((e=>e.trim()))}function y(e,t){return e.map((e=>e.trim())).join(t)}function w(e){try{document.createDocumentFragment().querySelector(e)}catch(e){return!1}return!0}function v(e,t){let n=[],r=(window,u(0,e)),i=d(r);return i&&n.unshift(i),t?{path:n,document:r||document}:n}n.r(t),n.d(t,{generateUUID:()=>r,getParentFromElement:()=>i,isJsonString:()=>o,getAttributes:()=>a,checkValue:()=>s,allFrame:()=>l,cssPath:()=>d,getTopMostWindow:()=>c,findIframeFromElement:()=>u,getIframeFromPath:()=>h,configMatch:()=>f,configExecuter:()=>p,UUID:()=>m,parseTextToHtml:()=>g,splitBydelimiter:()=>b,joinBydelimiter:()=>y,isValidSelector:()=>w,getElementPath:()=>v,default:()=>x});const x={getElementPath:v,isValidSelector:w,joinBydelimiter:y,splitBydelimiter:b,parseTextToHtml:g,UUID:m,configExecuter:p,configMatch:f,getIframeFromPath:h,findIframeFromElement:u,getTopMostWindow:c,cssPath:d,allFrame:l,checkValue:s,getAttributes:a,isJsonString:o,getParentFromElement:i,generateUUID:r}},442:(e,t,n)=>{"use strict";var r=o(n(727)),i=o(n(980));function o(e){return e&&e.__esModule?e:{default:e}}window.parent===window&&(window.addEventListener("load",(()=>{i.default.listen("domEditor",(function(e){if(e.target&&(e.target=document.querySelector(`[data-element_id="${e.target}"]`)),e.value[1]&&(e.value[1]=document.querySelector(`[data-element_id="${e.value[1]}"]`)),!e.target)return;if(!e.value[1])return;let[t,n]=e.value;e.target.insertAdjacentElement(t,n)})),i.default.listen("dndNewElement",(function(e){try{if(e.path.length){let t=document.querySelector(e.path[0]),n=t.contentWindow.document||t.contentDocument;e.target=n.querySelector(`[data-element_id=${e.target}]`)}else e.target=document.querySelector(`[data-element_id=${e.target}]`);if(e.value[1]=r.default.parseTextToHtml(e.value[1]),e.hiddenAttribute)for(let[t,n]of Object.entries(e.hiddenAttribute))e.value[1].setHiddenAttribute(t,n);let[t,n]=e.value;e.target.insertAdjacentElement(t,n)}catch(e){}}))})),window.addEventListener("dndsuccess",(e=>{let{dropedEl:t,dragedEl:n,position:o,dropType:a,path:s}=e.detail;if(n.ownerDocument!==t.ownerDocument?window.iframes.guests.canvas.window.CoCreate:window.CoCreate,t.getAttribute("data-element_id")||t.setAttribute("data-element_id",r.default.UUID()),t=t.getAttribute("data-element_id"),"data-cloneable"===a){let e=n.getAllHiddenAttribute();n=n.outerHTML,i.default.send({broadcast_sender:!1,rooms:"",emit:{message:"dndNewElement",data:{target:t,method:"insertAdjacentElement",value:[o,n],path:s,hiddenAttribute:e}}})}else n.getAttribute("data-element_id")||n.setAttribute("data-element_id",r.default.UUID()),n=n.getAttribute("data-element_id"),i.default.send({broadcast_sender:!0,rooms:"",emit:{message:"domEditor",data:{target:t,method:"insertAdjacentElement",value:[o,n]}}})})))},586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){o.default.init({name:"dnd-config",observe:["childList"],include:".sortable, .cloneable",callback:e=>{a(e.target.parentElement.parentElement)}}),a(document)};var r,i=n(352),o=(r=n(366))&&r.__esModule?r:{default:r};function a(e){e.querySelectorAll(".sortable").forEach((e=>{(0,i.initContainer)({target:e})})),e.querySelectorAll(".cloneable").forEach((e=>{(0,i.initContainer)({target:e,cloneable:!0})}))}},197:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.listener={},this.on=function(e,t){Object.hasOwnProperty(e)||(this.listener[e]=[]),this.listener[e].push(t)},this.dispatch=function(e,t){this.listener.hasOwnProperty(e)&&this.listener[e].forEach((e=>e(t)))}}},352:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.initIframe=t.initFunction=t.initElement=t.initContainer=void 0,n(442);var r=d(n(586));n(493);var i=n(155),o=d(n(492));n(591);var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(996));n(127);var s=d(n(825));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}let c,u,h,f,p;let m,g,b={scroller:new i.autoScroller({speed:4,threshold:3}),myDropMarker:new i.dropMarker},{myDropMarker:y,scroller:w}=b,v=new o.default((function(){return u?u.apply(null,arguments):{}}));v.on("dragStart",(e=>{y.hide(),m=new i.ghostEffect(e.e,e.el,{window,document}),m.start()})),v.on("dragEnd",(e=>{y.hide(),m&&m.hide(e.ref)})),v.on("dragOver",(e=>{y.draw(e.el,e.closestEl,e.orientation,!!e.hasChild,e.ref)}));let x=!1;function E(e,t){let n=(0,i.getCocs)(e.target,[a.draggable,a.cloneable,a.handleable]);if(!Array.isArray(n))return;let[r,o]=n;switch(o){case a.cloneable:let e=r.getAttribute(a.data_insert_html);if(e){if(r=(0,i.parse)(e),!r)return}else r=r.cloneNode(!0);break;case a.draggable:if(r.getAnyAttribute(a.handleable))return;break;default:r=(0,i.getCoc)(r,a.draggable)}let s=(0,i.getGroupName)(r);g=s[1],t.document.body.style.cursor="crosshair !important",x=!0,v.dragStart(e,r,null,t,o)}function A(e,t){t.document.body.style.cursor="",x=!1,v.dragEnd(e),y.hide(),w.deactivateScroll()}function S({x:e,y:t,target:n,isTouch:r},o,s){if(!x)return;if(m&&m.draw({x:e,y:t},o),w.update(e,t),x){let[e,t]=(0,i.getGroupName)(n);if(g&&t){if(g!==t)for(;;){let r=(0,i.getGroupName)(e);if(!r[0])return;if(e=r[0].parentElement,t=r[1],g===t){n=r[0];break}}}else if(g!==t)return}else m&&m.hide();if(!n)return;let l=(0,i.getCoc)(n,a.droppable);l&&(s||w.calculateScroll({x:e,y:t,element:l.parentElement,onMouseScrollMove:e=>S(e,o,!0)}),v.dragOver({x:e,y:t,target:l},l,o))}p=(e,t)=>{1==e.which&&E(e,t)},f=(e,t)=>{1==e.which&&A(e,t)},h=(e,t)=>{S(e,t)};let M=new Map;const C=({isIframe:e,frame:t,document:n,window:r})=>{let o,l,d,u,m,g,b;if(e){let e=t.contentWindow,n=e.document||t.contentDocument,r=t.getBoundingClientRect();o={x:r.left,y:r.top,frame:t,window:e,document:n,isIframe:!0}}else o={x:0,y:0,window:r,document:n,isIframe:!1};if(s.default.register(o.window),!o.window.CoCreateDnd||!o.window.CoCreateDnd.hasInit){if(!o.document.querySelector("#dnd-style")){let e=o.document.createElement("style");e.id="dnd-style",e.innerHTML='    /* dnd specic */\n      [data-draggable="true"], [data-cloneable="true"]  {\n        touch-action: none;\n      }\n      /* dnd specic */',o.document.head.append(e)}o.document.addEventListener("dragstart",(e=>(e.preventDefault(),!1))),o.document.addEventListener("selectstart",(e=>{let t=(0,i.getCocs)(e.target,[a.draggable,a.cloneable]);Array.isArray(t)&&e.preventDefault()}),{passive:!1}),M.has(o.window)?({mousemovee:l,mouseupe:d,mousedowne:u,touchmovee:m,touchheade:g,touchstarte:b}=M.get(o.window)):(b=function(e){c&&clearTimeout(c),c=setTimeout((()=>{o.document.body.style.touchAction="none",e.preventDefault(),E(e,o)}),1e3)},g=function(e){o.document.body.style.touchAction="auto",x?(e.preventDefault(),A(e,o)):c&&clearTimeout(c)},m=function(e){if(!x)return void(c&&clearTimeout(c));e.preventDefault();let t=e.touches[0],n=t.clientX,r=t.clientY,i=o.document.elementFromPoint(n,r);i&&S({x:n,y:r,target:i,isTouch:!0},o)},u=function(e){p.apply(this,[e,o])},d=function(e){f.apply(this,[e,o])},l=function(e){h.apply(this,[e,o])},M.set(o.window,{mousemovee:l,mouseupe:d,mousedowne:u,touchmovee:m,touchheade:g,touchstarte:b})),o.document.removeEventListener("touchstart",b),o.document.addEventListener("touchstart",b),o.document.removeEventListener("touchend",g,{passive:!1}),o.document.addEventListener("touchend",g,{passive:!1}),o.document.removeEventListener("touchmove",m,{passive:!1}),o.document.addEventListener("touchmove",m,{passive:!1}),o.document.removeEventListener("mousedown",u),o.document.addEventListener("mousedown",u),o.document.removeEventListener("mouseup",d),o.document.addEventListener("mouseup",d),o.document.removeEventListener("mousemove",l),o.document.addEventListener("mousemove",l)}};t.initIframe=C,window.addEventListener("load",(()=>{window.parent===window&&(C({document,window}),(0,r.default)())}));const _=function({target:e,onDnd:t,onDndSuccess:n}){"function"==typeof n&&(u=n),i.initFunctionState.push({target:e,onDnd:t})};t.initFunction=_;const k=function({target:e,dropable:t,draggable:n,cloneable:r,handle:i,group:o,exclude:s,beforeDndSuccess:l}){try{if("function"==typeof l&&(u=l),o&&e.setHiddenAttribute(a.group_name,o),s)try{e.querySelectorAll(s).forEach((e=>{e.setHiddenAttribute(a.exclude,"true")}))}catch(e){if(e instanceof HTMLElement){}throw e}t&&e.querySelectorAll(t).forEach((e=>{e.setHiddenAttribute(a.droppable,"true")})),n&&e.querySelectorAll(n).forEach((e=>{e.setHiddenAttribute(a.draggable,"true")})),r&&e.querySelectorAll(r).forEach((e=>{e.setHiddenAttribute(a.cloneable,"true")}))}catch(e){if(e instanceof DOMException){throw e}throw e}};function O(e,t){e.children.length&&Array.from(e.children).forEach((e=>{O(e),e.setHiddenAttribute(a.exclude,"true"),e.setHiddenAttribute(a.draggable,"true"),t&&e.setHiddenAttribute(a.cloneable,"true")}))}t.initElement=k;const D=function({target:e,cloneable:t=!1,nested:n=!1,handle:r,group:i,exclude:o}){if(i&&e.setHiddenAttribute(a.group_name,i),o)try{e.querySelectorAll(o).forEach((e=>{e.setHiddenAttribute(a.exclude,"true")}))}catch(e){if(e instanceof DOMException){throw"Dnd Sortable: exclude must be valid selector"}throw e}if(!e.tagName){throw"Dnd Sortable: Please provide a valid element"}if("boolean"!=typeof t){throw"Dnd Sortable: please provide valid data type for cloneable"}if("boolean"!=typeof n){throw"Dnd Sortable: please provide valid data type for nested"}n?O(e,t):(e.setHiddenAttribute(a.droppable,"true"),e.children.length&&Array.from(e.children).forEach((e=>{t?e.setHiddenAttribute(a.cloneable,"true"):e.setHiddenAttribute(a.draggable,"true");try{let t=e.querySelectorAll(r);r&&t.length&&(e.setHiddenAttribute(a.draggable,"true"),t.forEach((e=>{e.setHiddenAttribute(a.draggable,"true")})))}catch(e){if(e instanceof DOMException){throw"Dnd Sortable: handle must be a valid selector"}throw e}})))};t.initContainer=D;let T={initContainer:D,initElement:k,initFunction:_};var j={initIframe:C,init:function(e){let{mode:t}=e;if(delete e.mode,!["function","element","container"].includes(t))throw new Error("invalid mode provided");let n="init"+t.charAt(0).toUpperCase()+t.slice(1);T[n].apply(null,[e])}};t.default=j},155:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCoc=function(e,t){e.tagName||(e=e.parentElement);return a.getContext(e,t)},t.getCocs=function(e,t){e.tagName||(e=e.parentElement);return a.getContexts(e,t)},t.getGroupName=function(e){e.tagName||(e=e.parentElement);for(;;){let t=e.getAttribute(r.group_name);if(t)return[e,t];if(!(e=e.parentElement))return[null,void 0]}},t.computeStyles=l,t.randomId=function(){return window.crypto.getRandomValues(new Uint32Array(1))[0].toString(16)},t.dropMarker=function(e){e=Object.assign({borderSize:2,dropMarkerMargin:5},e);let t=document.createElement("div");t.id="dropMarker",t.style.pointerEvents="none",this.lastOrigntaion=void 0,document.body.append(t),this.obj=t,this.draw=function(n,r,i,o,a){t.style.display="block";let s,l=r.getBoundingClientRect();switch(l.width||l.height||(l=n.getBoundingClientRect(),i="top"),i){case"top":case"bottom":t.style.height=e.borderSize+"px",t.style.width=l.width+"px";break;case"left":case"right":t.style.width=e.borderSize+"px",t.style.height=l.height+"px";break;default:throw new Error("one type of orientation must be specified")}if(n!=r){let t=n.getBoundingClientRect()[i],r=l[i];Math.abs(t-r)<2*e.dropMarkerMargin&&(o=!0)}switch(s=a.frame?a.frame.getBoundingClientRect():{top:0,left:0},t.style.transition="top,left 0.2s ease-in-out",i){case"top":t.style.top=s.top+l.top-e.borderSize/2+window.scrollY+(o?e.dropMarkerMargin:-e.dropMarkerMargin)+"px",t.style.left=s.left+l.left-e.borderSize/2+window.scrollX+"px";break;case"bottom":t.style.top=s.top+l.bottom-e.borderSize/2+window.scrollY+(o?-e.dropMarkerMargin:e.dropMarkerMargin)+"px",t.style.left=s.left+l.left-e.borderSize/2+window.scrollX+"px";break;case"left":t.style.top=s.top+l.top-e.borderSize/2+window.scrollY+"px",t.style.left=s.left+l.left-e.borderSize/2+window.scrollX+(o?e.dropMarkerMargin:-e.dropMarkerMargin)+"px";break;case"right":t.style.top=s.top+l.top-e.borderSize/2+window.scrollY+"px",t.style.left=s.left+l.right-e.borderSize/2+window.scrollX+(o?-e.dropMarkerMargin:e.dropMarkerMargin)+"px";break;default:throw new Error("one type of orientation must be specified")}this.lastOrigntaion=i},this.hide=function(e){t.style.display="none"}},t.parse=function(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.head.children[0]?t.head.children[0]:t.body.children[0]},t.ghostEffect=function(e,t,n){this.effectCb,t.removeAttribute("CoC-dragging"),this.start=()=>{this.cloneEl=t.cloneNode(!0);let{width:e,height:r}=n.window.getComputedStyle(t);window.getComputedStyle(this.cloneEl);this.wrapper=document.createElement("div"),this.wrapper.style.height=r,this.wrapper.style.width=e,this.wrapper.append(this.cloneEl),this.wrapper.style.display="none",n.document.body.append(this.wrapper),this.wrapper.style.pointerEvents="none",this.wrapper.id="ghostEffect"},this.draw=(t,n)=>{this.wrapper.style.display="block";this.wrapper.getBoundingClientRect();let r,{marginTop:i,marginBottom:o,marginLeft:a,marginRight:s,width:d,height:c}=l(this.cloneEl,["marginTop","marginBottom","marginLeft","marginRight","width","height"]);r=n.frame?n.frame.getBoundingClientRect():{top:0,left:0},this.wrapper.style.top=r.top+t.y-e.offsetY+"px",this.wrapper.style.left=r.left+t.x-e.offsetX+"px"},this.hide=()=>{this.wrapper.remove()}},t.pDistance=d,t.closestChild=function(e,t){let n,r,i=1/0;for(let o of t){if(o.classList.contains("hidden"))continue;let[t,a]=u(e,o);a<i&&(i=a,n=o,r=t)}return[r,n]},t.distanceToChild=u,t.distanceToChildLeftRight=h,t.distanceToChildTopBottom=f,t.autoScroller=function({speed:e,threshold:t}){this.lastScrollingElement,this.onElement,this.mouse,this.speed,this.interval,this.isActive,this.update=function(e,t){this.mouse={x:e,y:t}},this.calculateScroll=function({x:n,y:r,element:i,onMouseScrollMove:o}){for(;!(i&&i.tagName&&(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth))&&i.parentElement;)i=i.parentElement;let a=i.scrollWidth>i.clientWidth,s=i.scrollHeight>i.clientHeight,l=i.clientWidth/t,d=i.clientHeight/t,[c,u]=[];if(s?[c,u]=f([n,r],i):a&&([c,u]=h([n,r],i)),c){let t;switch(c){case"top":case"bottom":this.speed=d/(u+1)*e,t=u<d;break;case"left":case"right":this.speed=l/(u+1)*e,t=u<l}t?this.isActive?this.isActive&&this.lastScrollingElement!==i&&(this.deactivateScroll(i),this.__activateScroll(i,c,o)):(this.isActive=!0,this.__activateScroll(i,c,o)):this.isActive&&(this.isActive=!1,this.deactivateScroll(i))}},this.__activateScroll=function(e,t,n){e.style.scrollBehavior="auto",this.lastScrollingElement=e,this.interval=setInterval((()=>{switch(t){case"top":e.scrollBy(0,-this.speed);break;case"bottom":e.scrollBy(0,this.speed);break;case"left":e.scrollBy(-this.speed,0);break;case"right":e.scrollBy(this.speed,0)}}),10)},this.deactivateScroll=function(e){e&&(e.style.scrollBehavior=""),clearInterval(this.interval)}},Object.defineProperty(t,"initFunctionState",{enumerable:!0,get:function(){return i.initFunctionState}}),t.dndContext=void 0;var r=n(996),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(612));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}let a,s=window;for(;s!==window.parent;)s=window.parent;function l(e,t){let n=window.getComputedStyle(e),r={};return t.forEach((e=>{r[e]=parseInt(n[e])})),r}t.dndContext=a,s.dndContext?t.dndContext=a=s.dndContext:(t.dndContext=a=new i.default,s.dndContext=a);function d(e,t,n,r,i,o){var a,s,l=i-n,d=o-r,c=l*l+d*d,u=-1;0!=c&&(u=((e-n)*l+(t-r)*d)/c),u<0?(a=n,s=r):u>1?(a=i,s=o):(a=n+u*l,s=r+u*d);var h=e-a,f=t-s;return Math.sqrt(h*h+f*f)}let c=["left","top","right","bottom"];function u(e,t){let n,r=t.getBoundingClientRect(),i={p1:[r.top,r.left],p2:[r.bottom,r.left]},o={p1:[r.top,r.left],p2:[r.top,r.right]},a={p1:[r.top,r.right],p2:[r.bottom,r.right]},s={p1:[r.bottom,r.left],p2:[r.bottom,r.right]},l=[d(e[0],e[1],i.p1[1],i.p1[0],i.p2[1],i.p2[0]),d(e[0],e[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0]),d(e[0],e[1],a.p1[1],a.p1[0],a.p2[1],a.p2[0]),d(e[0],e[1],s.p1[1],s.p1[0],s.p2[1],s.p2[0])],u=1/0;return l.forEach(((e,t)=>{e<u&&(u=e,n=c[t])})),[n,u]}function h(e,t){let n,r=t.getBoundingClientRect(),i={p1:[r.top,0],p2:[r.bottom,0]},o={p1:[r.top,t.clientWidth],p2:[r.bottom,t.clientWidth]},a=[d(e[0],e[1],i.p1[1],i.p1[0],i.p2[1],i.p2[0]),d(e[0],e[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0])],s=1/0;return a.forEach(((e,t)=>{e<s&&(s=e,n=["left","right"][t])})),[n,s]}function f(e,t){let n,r=t.getBoundingClientRect(),i={p1:[0,r.left],p2:[0,r.right]},o={p1:[t.clientHeight,r.left],p2:[t.clientHeight,r.right]},a=[d(e[0],e[1],i.p1[1],i.p1[0],i.p2[1],i.p2[0]),d(e[0],e[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0])],s=1/0;return a.forEach(((e,t)=>{e<s&&(s=e,n=["top","bottom"][t])})),[n,s]}},612:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){this.map=new Map,this.checkInitFunction=function(e,t){for(let r of n)if(r.target.contains(e)){let n=r.onDnd(e,t);if(Array.isArray(n))return n}},this.getContext=function(e,t){do{if("true"==e.getAnyAttribute(t))return e;if(this.checkInitFunction(e,[t]))return e;e=e.parentElement}while(e)},this.getContexts=function(e,t){do{for(let n of t){if("true"==e.getAnyAttribute(n))return[e,n];{let n=this.checkInitFunction(e,t);if(Array.isArray(n)&&t.includes(n[1]))return n}}e=e.parentElement}while(e)},this.setContext=function(e,t,n){e.setHiddenAttribute(t,n)}},t.initFunctionState=void 0;let n=[];t.initFunctionState=n},825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;let n=new function(e){this.state=e,this.removeAttribute=(e,t)=>{this.state.has(e)&&delete this.state.get(e).attributes[t]},this.hasAttribute=(e,t)=>{if(this.state.has(e))return!!this.state.get(e).attributes[t]},this.getAttribute=(e,t)=>{if(this.state.has(e))return this.state.get(e).attributes[t]},this.setAttribute=(e,t,n)=>{this.state.has(e)?this.state.get(e).attributes[t]=n:this.state.set(e,{element:e,attributes:{[t]:n}})},this.getAllAttributes=e=>{if(this.state.has(e))return this.state.get(e).attributes},this.getDataset=e=>{let t={};for(let[n,r]of Object.entries(this.state.get(e).attributes))n.beginsWith("data-")&&(t[n.substr(5)]=r);return t}}(new Map);function r(e,t=n){let r=e.HTMLElement.prototype;if(r.setHiddenAttribute)return;let i=r.setAttribute;r.setAttribute=function(e,t){i.apply(this,[e,t])},r.setHiddenAttribute=function(e,n){t.setAttribute(this,e,n)},r.getHiddenAttribute=function(e){return t.getAttribute(this,e)},r.getAllHiddenAttribute=function(e){return t.getAllAttributes(this)},r.getAnyAttribute=function(e){return this.hasAttribute(e)?this.getAttribute(e):t.hasAttribute(this,e)?t.getAttribute(this,e):void 0},r.setAnyAttribute=function(e,n){this.setAttribute(e,n),t.setAttribute(this,e,n)},r.removeAnyAttribute=function(e){this.removeAnyAttribute(e),t.removeAttribute(this,e)},r.hasAnyAttribute=function(e,n){return this.hasAttribute(e)||t.hasAttribute(this,e)},r.hideAttribute=function(e){if(this.hasAttribute(e)){if(t.hasAttribute(this,e))return!1;t.setAttribute(this,e,this.getAttribute(e)),this.removeAttribute(e)}},r.unhideAttribute=function(e){if(t.hasAttribute(this,e)){if(this.hasAttribute(e))return!1;this.setAttribute(e,t.getAttribute(this,e)),t.removeAttribute(this,e)}}}window.domContext=n,function(){let e=Array.from(window.frames);e.unshift(window);for(let t of e)r(t.window)}();var i={register:r,domContext:n};t.default=i},493:()=>{"use strict";window.addEventListener("load",(()=>{let e={host:{document,window},guests:{}};window.iframes=e;let t=document.getElementsByTagName("iframe"),n=1;for(let r of t){let t=r.id||"iframe"+n++;e.guests[t]={frame:r,document:r.contentDocument,window:r.contentWindow},r.contentWindow.iframes=e}new MutationObserver((function(t,r){for(let r of t)if("childList"===r.type)for(let t of r.addedNodes)if("IFRAME"===t.tagName){let r=t.id||"iframe"+n++;e.guests[r]={frame:t,document:t.contentDocument,window:t.contentWindow},t.contentWindow.iframes=e}})).observe(document.body,{attributes:!0,childList:!0,subtree:!0})}))},591:()=>{"use strict";let e=null,t=null;document.addEventListener("mousedown",(n=>{1===n.which&&(e=n.target,t=(new Date).getTime())})),document.addEventListener("mouseup",(n=>{let r=(new Date).getTime();if(e==n.target&&r<t+500){const e=new CustomEvent("CoCreateClickLeft",{bubbles:!0});n.target.dispatchEvent(e)}}))},996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.data_insert_html=t.group_name=t.dndname=t.handleable=t.hoverable=t.editable=t.selectable=t.cloneable=t.draggable=t.exclude=t.droppable=void 0;t.droppable="data-droppable";t.exclude="data-exclude";t.draggable="data-draggable";t.cloneable="data-cloneable";t.selectable="data-selectable";t.editable="data-editable";t.hoverable="data-hoverable";t.handleable="data-handle";t.dndname="data-name";t.group_name="data-group_name";t.data_insert_html="data-insert-html"},492:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){this.dragedEl,this.dropedEl,this.position,this.id,this.type;let t=new r.default;this.on=function(){t.on.apply(t,arguments)},this.dragStart=(e,n,r,i,o)=>{this.id=r,this.dropType=o,this.dragedEl=n,t.dispatch("dragStart",{e,el:n,ref:i})},this.dragEnd=(n,r)=>{try{if(this.dragedEl&&this.dragedEl.removeAttribute("CoC-dragging"),this.position){if(this.dropedEl===this.dragedEl)throw"dnd cancelled. you can't dnd on the same element.";if(this.dragedEl.contains(this.dropedEl))throw"dnd cancelled, you can't dnd from parent to its children.";let t,n=o.default.getElementPath(this.dropedEl),r={position:this.position,dragedEl:this.dragedEl,dropedEl:this.dropedEl,dropType:this.dropType,path:n};e&&(t=e(r)),Object.assign(r,t);const i=new CustomEvent("dndsuccess",{bubbles:!1,detail:r});r.dropedEl,r.position,r.dragedEl;this.dropedEl.insertAdjacentElement(this.position,this.dragedEl),window.dispatchEvent(i,{bubbles:!1})}}catch(n){}finally{this.type&&(this.position=null),t.dispatch("dragEnd",{e:n,ref:r})}},this.dragOver=(e,n,r)=>{if(this.dragedEl&&this.dragedEl.setAttribute("CoC-dragging",!0),0===n.children.length){let[o,a]=(0,i.closestChild)([e.x,e.y],[n]);t.dispatch("dragOver",{e,el:n,closestEl:a,orientation:o,hasChild:!0,ref:r}),this.position=s.includes(o)?"afterbegin":"beforeend",this.dropedEl=n,this.type="normal"}else{let[o,a]=(0,i.closestChild)([e.x,e.y],n.children);if("true"==a.getAttribute("data-exclude")){this.dropedEl=a.parentElement;let[t,n]=(0,i.closestChild)([e.x,e.y],[this.dropedEl]);o=t}else this.dropedEl=a;t.dispatch("dragOver",{e,el:n,closestEl:a,orientation:o,hasChild:!1,ref:r}),this.position=s.includes(o)?"beforebegin":"afterend",this.type="children"}}};var r=a(n(197)),i=n(155),o=(n(996),a(n(727)));function a(e){return e&&e.__esModule?e:{default:e}}let s=["left","top"]},127:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(483),i=n.n(r);const o=n.p+"862e2fd973e3d8e9d9daf4bf94ef74e4.css";var a={injectType:"linkTag",insert:"head"};i()(o,a);const s={}},483:(e,t,n)=>{"use strict";var r,i=(r={},function(e){if(void 0===r[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}r[e]=t}return r[e]});e.exports=function(e,t){if((t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},void 0===t.attributes.nonce){var r=n.nc;r&&(t.attributes.nonce=r)}var o=document.createElement("link");if(o.rel="stylesheet",o.href=e,Object.keys(t.attributes).forEach((function(e){o.setAttribute(e,t.attributes[e])})),"function"==typeof t.insert)t.insert(o);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(o)}return function(e){"string"==typeof e?o.href=e:o.parentNode.removeChild(o)}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})();var r=n(352);return r=r.default})()}));
=======
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CoCreate=e():(t.CoCreate=t.CoCreate||{},t.CoCreate.dnd=e())}(this,(function(){return(()=>{"use strict";var t={366:(t,e,r)=>{r.r(e),r.d(e,{default:()=>i}),window.profiler={},window.counter=0,window.counter2=0,window.targets={},window.attributeName={},Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),r=e.length;--r>=0&&e.item(r)!==this;);return r>-1});const n={initTasks:new Map,attrTasks:new Map,rules:new Map,rulesArray:[],__init:function(){const t=this;new MutationObserver(((e,r)=>t.__callback(e,r))).observe(document.body,{attributes:!0,childList:!0,subtree:!0,characterData:!1,attributeOldValue:!0,characterData:!0})},init:function({observe:t,include:e,exclude:r,attributes:n,name:i,callback:o}){t.some((t=>"childList"==t))&&this.initTasks.set(o,{observe:t,include:e,exclude:r,attributes:n,name:i}),t.some((t=>"attributes"==t))&&this.attrTasks.set(o,{observe:t,include:e,exclude:r,attributes:n,name:i})},remove:function(t){this.initTasks.delete(t),this.attrTasks.delete(t)},addRule:function({include:t,exclude:e,name:r}){this.rules.set(r,{include:t,exclude:e}),this.rulesArray=Array.from(this.rules)},removeRule:function({name:t}){this.rules.delete(t),this.rulesArray=Array.from(this.rules)},__callback:function(t,e){window.counter++;for(let e of t)"childList"==e.type&&e.addedNodes.length>0&&this.__initCallback(e),"attributes"==e.type&&this.__attrCallback(e)},__initCallback:function(t){Array.from(t.addedNodes);this.initTasks.forEach((({observe:e,include:r,exclude:n,attributes:i,name:o},a)=>{t.addedNodes.forEach((e=>{e.tagName&&(!r||e.matches(r)||e.querySelector(r))&&(n&&(e.matches(n)||e.querySelector(n))||a.apply(null,[{type:t.type,target:e}]))}))}))},__attrCallback:function(t){for(let[e,{include:r,exclude:n}]of this.rulesArray){if(r&&!t.target.matches(r))return;if(n&&t.target.matches(n))return}this.attrTasks.forEach((({observe:e,include:r,exclude:n,attributes:i,name:o},a)=>{if((!i||!t.attributeName||i.includes(t.attributeName))&&(!r||t.target.matches(r))&&(!n||!t.target.matches(n))&&t.attributeName){t.target.getAttribute(t.attributeName)!=t.oldValue&&a.apply(null,[t])}}))},setInitialized:function(t,e){t["co_initialized_"+(e=e||"")]=!0},getInitialized:function(t,e){return!!t["co_initialized_"+(e=e||"")]}};n.__init();const i=n},727:(t,e,r)=>{function n(t=36){let e=(new Date).getTime(),r=window.performance&&window.performance.now&&1e3*window.performance.now()||0,n="uxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(t<=n.length)n=n.substr(0,t);else{let e=t-n.length,r="-xxxyyxxx",i=Math.floor(e/r.length);for(let t=0;t<i;t++)n+=r;i=e-i*r.length,n+=r.substr(0,i)}return n.replace(/[xy]/g,(function(t){var n=16*Math.random();if(e>0){n=(e+n)%16|0;e=Math.floor(e/16)}else{n=(r+n)%16|0;r=Math.floor(r/16)}return("x"==t?n:7&n|8).toString(16)}))}function i(t,e,r){if(e){if(t.classList.contains(e))return t;let r=t.parentNode;for(;null!=r&&r.classList;){if(r.classList.contains(e))return r;r=r.parentNode}}else if(r){if(r.every((e=>t.attributes.hasOwnProperty(e))))return t;let e=t.parentNode;for(;null!=e&&e.attributes;){if(r.every((t=>e.attributes.hasOwnProperty(t))))return e;e=e.parentNode}}return!1}function o(t){try{let e=JSON.parse(t);return"object"==typeof e&&null!=e}catch(t){return!1}}function a(t){return t.getAttributeNames().reduce(((e,r)=>(e[r]=t.getAttribute(r),e)),{})}function l(t){return!!t&&!/{{\s*([\w\W]+)\s*}}/g.test(t)}function s(t){let e=[{document,window}];for(let t of document.querySelectorAll("iframe")){let r=t.contentDocument||t.contentWindow.document,n=t.contentWindow;e.push({document:r,window:n,frameElement:t})}let r=new Set;for(let n of e){let e=t(n);e&&"function"==typeof e[Symbol.iterator]?e.forEach((t=>r.add(t))):e&&r.add(e)}return Array.from(r)}function d(t){let e=[];do{if(!t||!t.tagName)return!1;let r=t.tagName.toLowerCase();if(t.id&&"BODY"!==t.tagName&&(r+="#"+t.id),t.classList.length&&"BODY"!==t.tagName&&t.classList.forEach((t=>{-1===t.indexOf(":")&&(r+="."+t)})),"BODY"!==t.tagName&&t.parentNode){let e=Array.prototype.indexOf.call(t.parentNode.children,t);r+=`:nth-child(${e+1})`}e.unshift(r),t=t.parentNode}while("HTML"!==t.tagName);return e.join(" > ")}function c(){let t=window;for(;t!==window.parent;)t=window.parent;return t}function u(t,e){let r;return s((t=>{t.document.contains(e)&&(r=t.frameElement)})),r}function h(t){let e=c;return t.forEach((t=>{e&&(e=e.querySelector(t))})),e}function*f(t,e){for(let r of t)r.selector&&e.matches(r.selector)&&(yield r)}function p(t,e,r,n){for(let i of f(n||window.elementConfig,t)){if(!0===i[e])return r(t,i);if(!1===i[e])return!1;if(void 0===i[e])continue;if(y(i[e]))return r(t,i,!0)}return!1}function m(t=10){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=r.length,i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e+=(new Date).toTimeString().replace(/[\W_]+/g,"").substr(0,6)}function g(t){let e=(new DOMParser).parseFromString(t,"text/html");return e.head.children[0]?e.head.children[0]:e.body.children[0]}function b(t,e){return t.split(e).map((t=>t.trim()))}function w(t,e){return t.map((t=>t.trim())).join(e)}function y(t){try{document.createDocumentFragment().querySelector(t)}catch(t){return!1}return!0}function v(t,e){let r=[],n=(window,u(0,t)),i=d(n);return i&&r.unshift(i),e?{path:r,document:n||document}:r}r.r(e),r.d(e,{generateUUID:()=>n,getParentFromElement:()=>i,isJsonString:()=>o,getAttributes:()=>a,checkValue:()=>l,allFrame:()=>s,cssPath:()=>d,getTopMostWindow:()=>c,findIframeFromElement:()=>u,getIframeFromPath:()=>h,configMatch:()=>f,configExecuter:()=>p,UUID:()=>m,parseTextToHtml:()=>g,splitBydelimiter:()=>b,joinBydelimiter:()=>w,isValidSelector:()=>y,getElementPath:()=>v,default:()=>E});const E={getElementPath:v,isValidSelector:y,joinBydelimiter:w,splitBydelimiter:b,parseTextToHtml:g,UUID:m,configExecuter:p,configMatch:f,getIframeFromPath:h,findIframeFromElement:u,getTopMostWindow:c,cssPath:d,allFrame:s,checkValue:l,getAttributes:a,isJsonString:o,getParentFromElement:i,generateUUID:n}},586:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){o.default.init({name:"dnd-config",observe:["childList"],include:".sortable, .cloneable",callback:t=>{let e=t.target?.parentElement||t.target;e&&a(e)}}),a(document)};var n,i=r(352),o=(n=r(366))&&n.__esModule?n:{default:n};function a(t){t.querySelectorAll(".sortable").forEach((t=>{(0,i.initContainer)({target:t})})),t.querySelectorAll(".cloneable").forEach((t=>{(0,i.initContainer)({target:t,cloneable:!0})}))}},197:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.listener={},this.on=function(t,e){Object.hasOwnProperty(t)||(this.listener[t]=[]),this.listener[t].push(e)},this.dispatch=function(t,e){this.listener.hasOwnProperty(t)&&this.listener[t].forEach((t=>t(e)))}}},352:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.initIframe=e.initFunction=e.initElement=e.initContainer=void 0;var n=d(r(586));r(493);var i=r(155),o=d(r(492));r(591);var a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}r.default=t,e&&e.set(t,r);return r}(r(996));r(127);var l=d(r(825));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function d(t){return t&&t.__esModule?t:{default:t}}let c,u,h,f,p;window.addEventListener("DOMContentLoaded",(t=>{l.default.register(window)}));let m,g,b={scroller:new i.autoScroller({speed:4,threshold:3}),myDropMarker:new i.dropMarker},{myDropMarker:w,scroller:y}=b,v=new o.default((function(){return u?u.apply(null,arguments):{}}));v.on("dragStart",(t=>{w.hide(),m=new i.ghostEffect(t.e,t.el,{window,document}),m.start()})),v.on("dragEnd",(t=>{w.hide(),m&&m.hide(t.ref)})),v.on("dragOver",(t=>{w.draw(t.el,t.closestEl,t.orientation,!!t.hasChild,t.ref)}));let E=!1;function A(t,e){let r=(0,i.getCocs)(t.target,[a.draggable,a.cloneable,a.handleable]);if(!Array.isArray(r))return;let[n,o]=r;switch(o){case a.cloneable:let t=n.getAttribute(a.data_insert_html);if(t){if(n=(0,i.parse)(t),!n)return}else n=n.cloneNode(!0);break;case a.draggable:if(n.getAnyAttribute(a.handleable))return;break;default:n=(0,i.getCoc)(n,a.draggable)}let l=(0,i.getGroupName)(n);g=l[1],e.document.body.style.cursor="crosshair !important",E=!0,v.dragStart(t,n,null,e,o)}function x(t,e){e.document.body.style.cursor="",E=!1,v.dragEnd(t),w.hide(),y.deactivateScroll()}function S({x:t,y:e,target:r,isTouch:n},o,l){if(!E)return;if(m&&m.draw({x:t,y:e},o),y.update(t,e),E){let[t,e]=(0,i.getGroupName)(r);if(g&&e){if(g!==e)for(;;){let n=(0,i.getGroupName)(t);if(!n[0])return;if(t=n[0].parentElement,e=n[1],g===e){r=n[0];break}}}else if(g!==e)return}else m&&m.hide();if(!r)return;let s=(0,i.getCoc)(r,a.droppable);s&&(l||y.calculateScroll({x:t,y:e,element:s.parentElement?s.parentElement:s,onMouseScrollMove:t=>S(t,o,!0)}),v.dragOver({x:t,y:e,target:s},s,o))}p=(t,e)=>{1==t.which&&A(t,e)},f=(t,e)=>{1==t.which&&x(t,e)},h=(t,e)=>{S(t,e)};let M=new Map;const C=({isIframe:t,frame:e,document:r,window:n})=>{let o,s,d,u,m,g,b;if(t){let t=e.contentWindow,r=t.document||e.contentDocument,n=e.getBoundingClientRect();o={x:n.left,y:n.top,frame:e,window:t,document:r,isIframe:!0}}else o={x:0,y:0,window:n,document:r,isIframe:!1};if(l.default.register(o.window),!o.window.CoCreateDnd||!o.window.CoCreateDnd.hasInit){if(!o.document.querySelector("#dnd-style")){let t=o.document.createElement("style");t.id="dnd-style",t.innerHTML='    /* dnd specic */\n      [data-draggable="true"], [data-cloneable="true"]  {\n        touch-action: none;\n      }\n      /* dnd specic */',o.document.head.append(t)}o.document.addEventListener("dragstart",(t=>(t.preventDefault(),!1))),o.document.addEventListener("selectstart",(t=>{if(t.target.getAttribute&&t.target.hasAttribute("contenteditable")||t.target.parentElement.hasAttribute("contenteditable"))return;let e=(0,i.getCocs)(t.target,[a.draggable,a.cloneable]);Array.isArray(e)&&t.preventDefault()}),{passive:!1}),M.has(o.window)?({mousemovee:s,mouseupe:d,mousedowne:u,touchmovee:m,touchheade:g,touchstarte:b}=M.get(o.window)):(b=function(t){c&&clearTimeout(c),c=setTimeout((()=>{o.document.body.style.touchAction="none",t.preventDefault(),A(t,o)}),1e3)},g=function(t){o.document.body.style.touchAction="auto",E?(t.preventDefault(),x(t,o)):c&&clearTimeout(c)},m=function(t){if(!E)return void(c&&clearTimeout(c));t.preventDefault();let e=t.touches[0],r=e.clientX,n=e.clientY,i=o.document.elementFromPoint(r,n);i&&S({x:r,y:n,target:i,isTouch:!0},o)},u=function(t){p.apply(this,[t,o])},d=function(t){f.apply(this,[t,o])},s=function(t){h.apply(this,[t,o])},M.set(o.window,{mousemovee:s,mouseupe:d,mousedowne:u,touchmovee:m,touchheade:g,touchstarte:b})),o.document.removeEventListener("touchstart",b),o.document.addEventListener("touchstart",b),o.document.removeEventListener("touchend",g,{passive:!1}),o.document.addEventListener("touchend",g,{passive:!1}),o.document.removeEventListener("touchmove",m,{passive:!1}),o.document.addEventListener("touchmove",m,{passive:!1}),o.document.removeEventListener("mousedown",u),o.document.addEventListener("mousedown",u),o.document.removeEventListener("mouseup",d),o.document.addEventListener("mouseup",d),o.document.removeEventListener("mousemove",s),o.document.addEventListener("mousemove",s)}};e.initIframe=C,window.addEventListener("load",(()=>{window.parent===window&&(C({document,window}),(0,n.default)())}));const _=function({target:t,onDnd:e,onDndSuccess:r}){"function"==typeof r&&(u=r),i.initFunctionState.push({target:t,onDnd:e})};e.initFunction=_;const O=function({target:t,dropable:e,draggable:r,cloneable:n,handle:i,group:o,exclude:l,beforeDndSuccess:s}){try{if("function"==typeof s&&(u=s),o&&t.setHiddenAttribute(a.group_name,o),l)try{t.querySelectorAll(l).forEach((t=>{t.setHiddenAttribute(a.exclude,"true")}))}catch(t){if(t instanceof HTMLElement){}throw t}e&&t.querySelectorAll(e).forEach((t=>{t.setHiddenAttribute(a.droppable,"true")})),r&&t.querySelectorAll(r).forEach((t=>{t.setHiddenAttribute(a.draggable,"true")})),n&&t.querySelectorAll(n).forEach((t=>{t.setHiddenAttribute(a.cloneable,"true")}))}catch(t){if(t instanceof DOMException){throw t}throw t}};function k(t,e){t.children.length&&Array.from(t.children).forEach((t=>{k(t),t.setHiddenAttribute(a.exclude,"true"),t.setHiddenAttribute(a.draggable,"true"),e&&t.setHiddenAttribute(a.cloneable,"true")}))}e.initElement=O;const D=function({target:t,cloneable:e=!1,nested:r=!1,handle:n,group:i,exclude:o}){if(i&&t.setHiddenAttribute(a.group_name,i),o)try{t.querySelectorAll(o).forEach((t=>{t.setHiddenAttribute(a.exclude,"true")}))}catch(t){if(t instanceof DOMException){throw"Dnd Sortable: exclude must be valid selector"}throw t}if(!t.tagName){throw"Dnd Sortable: Please provide a valid element"}if("boolean"!=typeof e){throw"Dnd Sortable: please provide valid data type for cloneable"}if("boolean"!=typeof r){throw"Dnd Sortable: please provide valid data type for nested"}r?k(t,e):(t.setHiddenAttribute(a.droppable,"true"),t.children.length&&Array.from(t.children).forEach((t=>{e?t.setHiddenAttribute(a.cloneable,"true"):t.setHiddenAttribute(a.draggable,"true");try{let e=t.querySelectorAll(n);n&&e.length&&(t.setHiddenAttribute(a.draggable,"true"),e.forEach((t=>{t.setHiddenAttribute(a.draggable,"true")})))}catch(t){if(t instanceof DOMException){throw"Dnd Sortable: handle must be a valid selector"}throw t}})))};e.initContainer=D;let T={initContainer:D,initElement:O,initFunction:_};var j={initIframe:C,init:function(t){let{mode:e}=t;if(delete t.mode,!["function","element","container"].includes(e))throw new Error("invalid mode provided");let r="init"+e.charAt(0).toUpperCase()+e.slice(1);T[r].apply(null,[t])}};e.default=j},155:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getCoc=function(t,e){t.tagName||(t=t.parentElement);return a.getContext(t,e)},e.getCocs=function(t,e){t.tagName||(t=t.parentElement);return a.getContexts(t,e)},e.getGroupName=function(t){t.tagName||(t=t.parentElement);for(;;){let e=t.getAttribute(n.group_name);if(e)return[t,e];if(!(t=t.parentElement))return[null,void 0]}},e.computeStyles=s,e.randomId=function(){return window.crypto.getRandomValues(new Uint32Array(1))[0].toString(16)},e.dropMarker=function(t){t=Object.assign({borderSize:2,dropMarkerMargin:5},t);let e=document.createElement("div");e.id="dropMarker",e.style.pointerEvents="none",this.lastOrigntaion=void 0,document.body.append(e),this.obj=e,this.draw=function(r,n,i,o,a){e.style.display="block";let l,s=n.getBoundingClientRect();switch(s.width||s.height||(s=r.getBoundingClientRect(),i="top"),i){case"top":case"bottom":e.style.height=t.borderSize+"px",e.style.width=s.width+"px";break;case"left":case"right":e.style.width=t.borderSize+"px",e.style.height=s.height+"px";break;default:throw new Error("one type of orientation must be specified")}if(r!=n){let e=r.getBoundingClientRect()[i],n=s[i];Math.abs(e-n)<2*t.dropMarkerMargin&&(o=!0)}switch(l=a.frame?a.frame.getBoundingClientRect():{top:0,left:0},e.style.transition="top,left 0.2s ease-in-out",i){case"top":e.style.top=l.top+s.top-t.borderSize/2+window.scrollY+(o?t.dropMarkerMargin:-t.dropMarkerMargin)+"px",e.style.left=l.left+s.left-t.borderSize/2+window.scrollX+"px";break;case"bottom":e.style.top=l.top+s.bottom-t.borderSize/2+window.scrollY+(o?-t.dropMarkerMargin:t.dropMarkerMargin)+"px",e.style.left=l.left+s.left-t.borderSize/2+window.scrollX+"px";break;case"left":e.style.top=l.top+s.top-t.borderSize/2+window.scrollY+"px",e.style.left=l.left+s.left-t.borderSize/2+window.scrollX+(o?t.dropMarkerMargin:-t.dropMarkerMargin)+"px";break;case"right":e.style.top=l.top+s.top-t.borderSize/2+window.scrollY+"px",e.style.left=l.left+s.right-t.borderSize/2+window.scrollX+(o?-t.dropMarkerMargin:t.dropMarkerMargin)+"px";break;default:throw new Error("one type of orientation must be specified")}this.lastOrigntaion=i},this.hide=function(t){e.style.display="none"}},e.parse=function(t){let e=(new DOMParser).parseFromString(t,"text/html");return e.head.children[0]?e.head.children[0]:e.body.children[0]},e.ghostEffect=function(t,e,r){this.effectCb,e.removeAttribute("CoC-dragging"),this.start=()=>{this.cloneEl=e.cloneNode(!0);let{width:t,height:n}=r.window.getComputedStyle(e);window.getComputedStyle(this.cloneEl);this.wrapper=document.createElement("div"),this.wrapper.style.height=n,this.wrapper.style.width=t,this.wrapper.append(this.cloneEl),this.wrapper.style.display="none",r.document.body.append(this.wrapper),this.wrapper.style.pointerEvents="none",this.wrapper.id="ghostEffect"},this.draw=(e,r)=>{this.wrapper.style.display="block";this.wrapper.getBoundingClientRect();let n,{marginTop:i,marginBottom:o,marginLeft:a,marginRight:l,width:d,height:c}=s(this.cloneEl,["marginTop","marginBottom","marginLeft","marginRight","width","height"]);n=r.frame?r.frame.getBoundingClientRect():{top:0,left:0},this.wrapper.style.top=n.top+e.y-t.offsetY+"px",this.wrapper.style.left=n.left+e.x-t.offsetX+"px"},this.hide=()=>{this.wrapper.remove()}},e.pDistance=d,e.closestChild=function(t,e){let r,n,i=1/0;for(let o of e){if(o.classList.contains("hidden"))continue;let[e,a]=u(t,o);a<i&&(i=a,r=o,n=e)}return[n,r]},e.distanceToChild=u,e.distanceToChildLeftRight=h,e.distanceToChildTopBottom=f,e.autoScroller=function({speed:t,threshold:e}){this.lastScrollingElement,this.onElement,this.mouse,this.speed,this.interval,this.isActive,this.update=function(t,e){this.mouse={x:t,y:e}},this.calculateScroll=function({x:r,y:n,element:i,onMouseScrollMove:o}){for(;!(i&&i.tagName&&(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth))&&i.parentElement;)i=i.parentElement;let a=i.scrollWidth>i.clientWidth,l=i.scrollHeight>i.clientHeight,s=i.clientWidth/e,d=i.clientHeight/e,[c,u]=[];if(l?[c,u]=f([r,n],i):a&&([c,u]=h([r,n],i)),c){let e;switch(c){case"top":case"bottom":this.speed=d/(u+1)*t,e=u<d;break;case"left":case"right":this.speed=s/(u+1)*t,e=u<s}e?this.isActive?this.isActive&&this.lastScrollingElement!==i&&(this.deactivateScroll(i),this.__activateScroll(i,c,o)):(this.isActive=!0,this.__activateScroll(i,c,o)):this.isActive&&(this.isActive=!1,this.deactivateScroll(i))}},this.__activateScroll=function(t,e,r){t.style.scrollBehavior="auto",this.lastScrollingElement=t,this.interval=setInterval((()=>{switch(e){case"top":t.scrollBy(0,-this.speed);break;case"bottom":t.scrollBy(0,this.speed);break;case"left":t.scrollBy(-this.speed,0);break;case"right":t.scrollBy(this.speed,0)}}),10)},this.deactivateScroll=function(t){t&&(t.style.scrollBehavior=""),clearInterval(this.interval)}},Object.defineProperty(e,"initFunctionState",{enumerable:!0,get:function(){return i.initFunctionState}}),e.dndContext=void 0;var n=r(996),i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=n?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}r.default=t,e&&e.set(t,r);return r}(r(612));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}let a,l=window;for(;l!==window.parent;)l=window.parent;function s(t,e){let r=window.getComputedStyle(t),n={};return e.forEach((t=>{n[t]=parseInt(r[t])})),n}e.dndContext=a,l.dndContext?e.dndContext=a=l.dndContext:(e.dndContext=a=new i.default,l.dndContext=a);function d(t,e,r,n,i,o){var a,l,s=i-r,d=o-n,c=s*s+d*d,u=-1;0!=c&&(u=((t-r)*s+(e-n)*d)/c),u<0?(a=r,l=n):u>1?(a=i,l=o):(a=r+u*s,l=n+u*d);var h=t-a,f=e-l;return Math.sqrt(h*h+f*f)}let c=["left","top","right","bottom"];function u(t,e){let r,n=e.getBoundingClientRect(),i={p1:[n.top,n.left],p2:[n.bottom,n.left]},o={p1:[n.top,n.left],p2:[n.top,n.right]},a={p1:[n.top,n.right],p2:[n.bottom,n.right]},l={p1:[n.bottom,n.left],p2:[n.bottom,n.right]},s=[d(t[0],t[1],i.p1[1],i.p1[0],i.p2[1],i.p2[0]),d(t[0],t[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0]),d(t[0],t[1],a.p1[1],a.p1[0],a.p2[1],a.p2[0]),d(t[0],t[1],l.p1[1],l.p1[0],l.p2[1],l.p2[0])],u=1/0;return s.forEach(((t,e)=>{t<u&&(u=t,r=c[e])})),[r,u]}function h(t,e){let r,n=e.getBoundingClientRect(),i={p1:[n.top,0],p2:[n.bottom,0]},o={p1:[n.top,e.clientWidth],p2:[n.bottom,e.clientWidth]},a=[d(t[0],t[1],i.p1[1],i.p1[0],i.p2[1],i.p2[0]),d(t[0],t[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0])],l=1/0;return a.forEach(((t,e)=>{t<l&&(l=t,r=["left","right"][e])})),[r,l]}function f(t,e){let r,n=e.getBoundingClientRect(),i={p1:[0,n.left],p2:[0,n.right]},o={p1:[e.clientHeight,n.left],p2:[e.clientHeight,n.right]},a=[d(t[0],t[1],i.p1[1],i.p1[0],i.p2[1],i.p2[0]),d(t[0],t[1],o.p1[1],o.p1[0],o.p2[1],o.p2[0])],l=1/0;return a.forEach(((t,e)=>{t<l&&(l=t,r=["top","bottom"][e])})),[r,l]}},612:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this.map=new Map,this.checkInitFunction=function(t,e){for(let n of r)if(n.target.contains(t)){let r=n.onDnd(t,e);if(Array.isArray(r))return r}},this.getContext=function(t,e){do{if("true"==t.getAnyAttribute(e))return t;if(this.checkInitFunction(t,[e]))return t;t=t.parentElement}while(t)},this.getContexts=function(t,e){do{for(let r of e){if("true"==t.getAnyAttribute(r))return[t,r];{let r=this.checkInitFunction(t,e);if(Array.isArray(r)&&e.includes(r[1]))return r}}t=t.parentElement}while(t)},this.setContext=function(t,e,r){t.setHiddenAttribute(e,r)}},e.initFunctionState=void 0;let r=[];e.initFunctionState=r},825:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;let r=new function(t){this.state=t,this.removeAttribute=(t,e)=>{this.state.has(t)&&delete this.state.get(t).attributes[e]},this.hasAttribute=(t,e)=>{if(this.state.has(t))return!!this.state.get(t).attributes[e]},this.getAttribute=(t,e)=>{if(this.state.has(t))return this.state.get(t).attributes[e]},this.setAttribute=(t,e,r)=>{this.state.has(t)?this.state.get(t).attributes[e]=r:this.state.set(t,{element:t,attributes:{[e]:r}})},this.getAllAttributes=t=>{if(this.state.has(t))return this.state.get(t).attributes},this.getDataset=t=>{let e={};for(let[r,n]of Object.entries(this.state.get(t).attributes))r.beginsWith("data-")&&(e[r.substr(5)]=n);return e}}(new Map);function n(t,e=r){let n=t.Element.prototype;if(n.setHiddenAttribute)return;let i=n.setAttribute;n.setAttribute=function(t,e){i.apply(this,[t,e])},n.setHiddenAttribute=function(t,r){e.setAttribute(this,t,r)},n.getHiddenAttribute=function(t){return e.getAttribute(this,t)},n.getAllHiddenAttribute=function(t){return e.getAllAttributes(this)},n.getAnyAttribute=function(t){return this.hasAttribute(t)?this.getAttribute(t):e.hasAttribute(this,t)?e.getAttribute(this,t):void 0},n.setAnyAttribute=function(t,r){this.setAttribute(t,r),e.setAttribute(this,t,r)},n.removeAnyAttribute=function(t){this.removeAnyAttribute(t),e.removeAttribute(this,t)},n.hasAnyAttribute=function(t,r){return this.hasAttribute(t)||e.hasAttribute(this,t)},n.hideAttribute=function(t){if(this.hasAttribute(t)){if(e.hasAttribute(this,t))return!1;e.setAttribute(this,t,this.getAttribute(t)),this.removeAttribute(t)}},n.unhideAttribute=function(t){if(e.hasAttribute(this,t)){if(this.hasAttribute(t))return!1;this.setAttribute(t,e.getAttribute(this,t)),e.removeAttribute(this,t)}}}window.domContext=r,function(){let t=Array.from(window.frames);t.unshift(window);for(let e of t)n(e.window)}();var i={register:n,domContext:r};e.default=i},493:()=>{window.addEventListener("load",(()=>{let t={host:{document,window},guests:{}};window.iframes=t;let e=document.getElementsByTagName("iframe"),r=1;for(let n of e){let e=n.id||"iframe"+r++;t.guests[e]={frame:n,document:n.contentDocument,window:n.contentWindow},n.contentWindow.iframes=t}new MutationObserver((function(e,n){for(let n of e)if("childList"===n.type)for(let e of n.addedNodes)if("IFRAME"===e.tagName){let n=e.id||"iframe"+r++;t.guests[n]={frame:e,document:e.contentDocument,window:e.contentWindow},e.contentWindow.iframes=t}})).observe(document.body,{attributes:!0,childList:!0,subtree:!0})}))},591:()=>{let t=null,e=null;document.addEventListener("mousedown",(r=>{1===r.which&&(t=r.target,e=(new Date).getTime())})),document.addEventListener("mouseup",(r=>{let n=(new Date).getTime();if(t==r.target&&n<e+500){const t=new CustomEvent("CoCreateClickLeft",{bubbles:!0});r.target.dispatchEvent(t)}}))},996:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.data_insert_html=e.group_name=e.dndname=e.handleable=e.hoverable=e.editable=e.selectable=e.cloneable=e.draggable=e.exclude=e.droppable=void 0;e.droppable="data-droppable";e.exclude="data-exclude";e.draggable="data-draggable";e.cloneable="data-cloneable";e.selectable="data-selectable";e.editable="data-editable";e.hoverable="data-hoverable";e.handleable="data-handle";e.dndname="data-name";e.group_name="data-group_name";e.data_insert_html="data-insert-html"},492:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){this.dragedEl,this.dropedEl,this.position,this.id,this.type;let e=new n.default;this.on=function(){e.on.apply(e,arguments)},this.dragStart=(t,r,n,i,o)=>{this.id=n,this.dropType=o,this.dragedEl=r,e.dispatch("dragStart",{e:t,el:r,ref:i})},this.dragEnd=(r,n)=>{try{if(this.dragedEl&&this.dragedEl.removeAttribute("CoC-dragging"),this.position){if(this.dropedEl===this.dragedEl)throw"dnd cancelled. you can't dnd on the same element.";if(this.dragedEl.contains(this.dropedEl))throw"dnd cancelled, you can't dnd from parent to its children.";let e,r=o.default.getElementPath(this.dropedEl),n={position:this.position,dragedEl:this.dragedEl,dropedEl:this.dropedEl,dropType:this.dropType,path:r};t&&(e=t(n)),Object.assign(n,e);const i=new CustomEvent("dndsuccess",{bubbles:!1,detail:n});n.dropedEl,n.position,n.dragedEl;this.dropedEl.insertAdjacentElement(this.position,this.dragedEl),window.dispatchEvent(i,{bubbles:!1})}}catch(r){}finally{this.type&&(this.position=null),e.dispatch("dragEnd",{e:r,ref:n})}},this.dragOver=(t,r,n)=>{if(this.dragedEl&&this.dragedEl.setAttribute("CoC-dragging",!0),0===r.children.length){let[o,a]=(0,i.closestChild)([t.x,t.y],[r]);e.dispatch("dragOver",{e:t,el:r,closestEl:a,orientation:o,hasChild:!0,ref:n}),this.position=l.includes(o)?"afterbegin":"beforeend",this.dropedEl=r,this.type="normal"}else{let[o,a]=(0,i.closestChild)([t.x,t.y],r.children);if("true"==a.getAttribute("data-exclude")){this.dropedEl=a.parentElement;let[e,r]=(0,i.closestChild)([t.x,t.y],[this.dropedEl]);o=e}else this.dropedEl=a;e.dispatch("dragOver",{e:t,el:r,closestEl:a,orientation:o,hasChild:!1,ref:n}),this.position=l.includes(o)?"beforebegin":"afterend",this.type="children"}}};var n=a(r(197)),i=r(155),o=(r(996),a(r(727)));function a(t){return t&&t.__esModule?t:{default:t}}let l=["left","top"]},127:(t,e,r)=>{r.r(e),r.d(e,{default:()=>l});var n=r(483),i=r.n(n);const o=r.p+"862e2fd973e3d8e9d9daf4bf94ef74e4.css";var a={injectType:"linkTag",insert:"head"};i()(o,a);const l={}},483:(t,e,r)=>{var n,i=(n={},function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]});t.exports=function(t,e){if((e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},void 0===e.attributes.nonce){var n=r.nc;n&&(e.attributes.nonce=n)}var o=document.createElement("link");if(o.rel="stylesheet",o.href=t,Object.keys(e.attributes).forEach((function(t){o.setAttribute(t,e.attributes[t])})),"function"==typeof e.insert)e.insert(o);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(o)}return function(t){"string"==typeof t?o.href=t:o.parentNode.removeChild(o)}}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})();var n=r(352);return n=n.default})()}));
>>>>>>> f977a2c46975414d532a510ec189c8d04e97e92c
